# BlueprintCompilerGeneratedDefaults

- **Function Description:** Indicates that the value of this attribute is generated by the compiler, thus it does not need to be copied post-compilation, which can enhance some aspects of compilation performance.
- **Usage Location:** UPROPERTY
- **Engine Module:** AnimationGraph
- **Metadata Type:** bool
- **Restricted Type:** Attributes within FAnimNode

Indicating that the value of this property is compiler-generated, it is unnecessary to copy it after compilation, which can improve some compilation performance.

Searching for examples in the source code reveals that these properties are primarily used under FAnimNode. After an animation blueprint is compiled, UEngine::CopyPropertiesForUnrelatedObjects is invoked to copy the values from the old object compiled previously to the new object. The bSkipCompilerGeneratedDefaults parameter in FCopyPropertiesForUnrelatedObjectsParams determines whether to assign the value of this property. If marked, it signifies that the property should not be copied. This value is filled in by the compiler elsewhere.

The UAnimGraphNode_Base::OnProcessDuringCompilation function is the callback function called after compilation.

## Test Code:

```cpp
USTRUCT(BlueprintInternalUseOnly)
struct INSIDER_API FAnimNode_MyCompilerDefaults : public FAnimNode_Base
{
	GENERATED_USTRUCT_BODY()
public:
	UPROPERTY(EditAnywhere, BlueprintReadWrite, Category=Links)
	FPoseLink Source;
public:
	UPROPERTY(EditAnywhere, BlueprintReadWrite, Category = CompilerDefaultsTest)
	FString MyString;

	UPROPERTY(EditAnywhere, BlueprintReadWrite, Category = CompilerDefaultsTest, meta = (BlueprintCompilerGeneratedDefaults))
	FString MyString_CompilerDefaults;
};

UCLASS()
class INSIDEREDITOR_API UAnimGraphNode_MyCompilerDefaults : public UAnimGraphNode_Base
{
	GENERATED_UCLASS_BODY()
public:
	~UAnimGraphNode_MyCompilerDefaults();

	UPROPERTY(EditAnywhere, Category = Settings)
	FAnimNode_MyCompilerDefaults Node;

protected:
	virtual void OnProcessDuringCompilation(IAnimBlueprintCompilationContext& InCompilationContext, IAnimBlueprintGeneratedClassCompiledData& OutCompiledData)
	{
		Node.MyString=TEXT("This is generated by compiler.");
		Node.MyString_CompilerDefaults=TEXT("This is generated by compiler.");
	}
};

```

## Test Effects:

As this is a serialization process, there is no直观 diagram available.

Verifiable results can be observed in FCPFUOWriter::ShouldSkipProperty, where the MyString_CompilerDefaults property is skipped during copying.

## Principle:

The essence of the blueprint compilation process is to generate a new Graph object and then copy the attributes and objects from the result object of the last compilation into this new object. This operation is performed using UEngine::CopyPropertiesForUnrelatedObjects, and internally, FCPFUOWriter::ShouldSkipProperty is used to decide whether to copy a particular property. For some attributes, their values are only temporary and generated by the compiler; they will be generated again in the next compilation, so there is no need to copy them. Marking them can slightly enhance performance, although the improvement is marginal.

```cpp
void UK2Node_PropertyAccess::CreateClassVariablesFromBlueprint(IAnimBlueprintVariableCreationContext& InCreationContext)
{
	GeneratedPropertyName = NAME_None;

	const bool bRequiresCachedVariable = !bWasResolvedThreadSafe || UAnimBlueprintExtension_PropertyAccess::ContextRequiresCachedVariable(ContextId);

	if(ResolvedPinType != FEdGraphPinType() && ResolvedPinType.PinCategory != UEdGraphSchema_K2::PC_Wildcard && bRequiresCachedVariable)
	{
		// Create internal generated destination property (only if we were not identified as thread safe)
		if(FProperty* DestProperty = InCreationContext.CreateUniqueVariable(this, ResolvedPinType))
		{
			GeneratedPropertyName = DestProperty->GetFName();
			DestProperty->SetMetaData(TEXT("BlueprintCompilerGeneratedDefaults"), TEXT("true"));
		}
	}
}

/* Serializes and stores property data from a specified 'source' object. Only stores data compatible with a target destination object. */
struct FCPFUOWriter : public FObjectWriter, public FCPFUOArchive
{
	#if WITH_EDITOR
	virtual bool ShouldSkipProperty(const class FProperty* InProperty) const override
	{
		return (bSkipCompilerGeneratedDefaults && InProperty->HasMetaData(BlueprintCompilerGeneratedDefaultsName));
	}
#endif
}
```